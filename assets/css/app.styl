@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'
@import 'normalize.css'
@import '../oembed/oembed.css'

// Media queries
$desktop = 1600px
$laptop = 1100px
$tablet = 768px
$mobile = 400px

// Colors
$primary ?= #fff
$secondary ?= #000
center = center

// Metrics
$padding = 7px

// CSS Reset
global-reset()

webfont('NH', 'NH', true, 'normal')
webfont('NHI', 'NHI', true, 'italic')

body,html
	width 100%
	height 100%
	background-color $primary
	-webkit-text-size-adjust 100%

html
	font-size 62.5%

body
	font-smoothing()
	font-size 2.3em
	line-height 1.1em
	font-family 'NH', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif
	padding $padding

p
	line-height 1.2em
	margin-bottom 1em

::selection
	background lightgrey
	
::-moz-selection
	background lightgrey

::-webkit-scrollbar
	width 0px
	background transparent

*
	box-sizing()

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

em
	font-family 'NHI', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif

h1, h2, strong
	text-transform uppercase

h1, h2, h3
	position relative
	padding-top .13em
	text-align left
	overflow visible

h1::before, h2::before, h3::before, span.menu div.articles::before
	content ''
	position absolute
	top 0
	left 0
	width 100%
	height 1px
	background $secondary

h1:last-child::after, h2:last-child::after, h3:last-child::after, .inner h2::after, .inner h3::after, span.menu div.article:not(:last-child)::after
	content ''
	position absolute
	bottom 0
	left 0
	width 100%
	height 1px
	background $secondary

h4
	padding-top .13em
	
h4::before
	content '\00a0'

.loader
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary
	background-size 15px
	z-index 10000

body
	#wrap::before
		content ''
		position fixed
		top 0
		left 'calc(50% - %s)' % ($padding/2)
		height 100%
		width $padding
		background $primary
	#wrap
		position relative
		width 100%
		height 100%
		.slider
			hideselect()
			position absolute
			display inline-block
			cursor pointer
			border $padding solid $primary
			.gallery_cell
				left 0 !important
				transition(-webkit-mask-position,3s)
				-webkit-animation wipe 6s infinite
				-webkit-animation-delay 3s
				-webkit-animation-direction alternate
				-webkit-mask-size 100% 100%
				-webkit-mask-position 0px 0
				-webkit-mask-repeat no-repeat
				-webkit-mask-image -webkit-gradient(linear, left top, right top, color-stop(0.00,  rgba(0,0,0,1)),color-stop(0.35,  rgba(0,0,0,1)),color-stop(0.50,  rgba(0,0,0,0)),color-stop(0.75,  rgba(0,0,0,0)),color-stop(1.00,  rgba(0,0,0,0)));
			.gallery_cell.is-selected
				-webkit-mask-position 3000px 0
			.gallery_cell.is-selected + .gallery_cell
				-webkit-mask-image none
			canvas
				position absolute 
				top 0
				left 0
				width 100%
				height 100%
			img
				height 100%
				width auto
				display block
				opacity 0
		.slider.size-1
			height 'calc(60vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-60vh + %s)' % ($padding*2)
		.slider.size-2
			height 'calc(80vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-80vh + %s)' % ($padding*2)
		.slider.size-3
			height 'calc(100vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-100vh + %s)' % ($padding*2)
		.slider.size-4
			height 'calc(120vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-120vh + %s)' % ($padding*2)
		.slider.size-5
			height 'calc(160vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-160vh + %s)' % ($padding*2)
		.slider.size-6
			height 'calc(180vh - %s)' % ($padding*2)
			img:nth-child(n+3)
				margin-top 'calc(-180vh + %s)' % ($padding*2)
		span.loading
			position absolute
		span.switch
			hideselect()
			span(1)
			margin-top 4em
			//position fixed
			//top calc(50% - 1em)
			//left $padding
			//width 'calc(100% - %s)' % ($padding * 2)
		span.back
			hideselect()
			position fixed
			bottom $padding
			left $padding
			z-index 1000
			h2::before, h2::after
				display none
		span.menu
			span(1)
			hideselect()
			h2.feed
				cursor pointer
			div.articles
				position relative
				display none
			div.articles.show
				display block
			div.article
				position relative
				padding-top .13em
		#page_content
			display none
			span(1/2)
			height 100vh
			overflow-y scroll
			position fixed
			right 0
			top $padding
			padding-bottom $padding*2
			border-left $padding solid $primary
			border-right $padding solid $primary
			background $primary
			.inner
				flowing-paragraph(1em)
				h2 + h2::before, h2 + h3::before
					display none
				h2 + p, .sticky-container + p
					padding-top .13em
				.sticky-container
					z-index 1
					position relative
					background $primary
					.fixed
						position fixed
						top $padding
						left 'calc(50% + %s)' % ($padding)
						width 'calc(50% - %s)' % ($padding*2)
						background $primary
						z-index 0
					.fixed.absolute
						position absolute
				.article:not(:last-child)
					margin-bottom 1.13em
			.inner.article
				text-align justify
				text-justify inter-word

body.page
	#wrap
		#page_content
			display block

body.project
	overflow hidden