@import 'nib'
@import '../../node_modules/jeet/stylus/jeet/*'
@import '_mixins.styl'

// Media queries
$large = 2600px
$desktop = 1900px
$laptop = 1024px
$tablet = 768px
$mobile = 425px

// Colors
$primary ?= #fff
$secondary ?= #000
center = center

// Metrics
$padding = 7px
fontoffset()
	//padding-top 2px
mediaqueries()
	+above($laptop + 1)
		font-size 23px
		line-height 27px
	+above($desktop)
		font-size 26px
		line-height 30px
	+above($large)
		font-size 30px
		line-height 35px

// CSS Reset
global-reset()

webfont('NH', 'NH', true, 'normal')
webfont('NHI', 'NHI', true, 'italic')

body,html
	width 100%
	height 100%
	background-color $primary
	-webkit-text-size-adjust 100%

html
	font-size 100%

body
	font-smoothing()
	//-webkit-font-smoothing subpixel-antialiased
	-webkit-font-variant-ligatures no-common-ligatures
	font-variant-ligatures no-common-ligatures
	font-family 'NH', Helvetica Neue, Helvetica, Arial, sans-serif
	padding $padding
	font-size 21px
	line-height 25px
	mediaqueries()

p
	margin-bottom 1em

::selection
	background lightgrey
	
::-moz-selection
	background lightgrey

::-webkit-scrollbar
	width 0px
	background transparent

*
	box-sizing()

a, a:hover, a:visited, a:focus
	color inherit
	text-decoration none
	cursor pointer

em
	font-family 'NHI', Helvetica Neue, Helvetica, Arial, sans-serif

h1, h2, strong
	text-transform uppercase

h1, h2, h3
	position relative
	text-align left
	overflow visible

h1, h2, h3, h4
	font-size 21px
	line-height 25px
	mediaqueries()
	
h4::before
	content '\00a0'

h1::before, h2::before, h3::before
	content ''
	position absolute
	top -2px
	left 0
	width 100%
	height 1px
	background $secondary

h1:last-child::after, h2:last-child::after, h3:last-child::after, .inner h2::after, .inner h3::after, span.menu div.article:not(:last-child)::after, h2.feed::after
	content ''
	position absolute
	bottom 1px
	left 0
	width 100%
	height 1px
	background $secondary

.indent
	text-indent 1em !important
	margin-left 0 !important

.loader
	position fixed
	width 100%
	height 100%
	top 0
	left 0
	background $primary
	background-size 15px
	z-index 10000

body
	span.back
		display none
		hideselect()
		position absolute
		bottom $padding
		left $padding
		z-index 2000
		h2
			+below($tablet)
				margin-top 2px
		h2::before, h2::after
			display none
	#wrap::before
		+above($tablet + 1)
			content ''
			position fixed
			top 0
			left 'calc(50% - %s)' % ($padding/2)
			height 100%
			width $padding
			background $primary
	#wrap
		position relative
		width 100%
		height 100%
		span.loading
			position absolute
			opacity 1
		.slider
			hideselect()
			position absolute
			display inline-block
			border $padding solid $primary
			canvas
				opacity 0
				position absolute 
				top 0
				left 0
				width 100%
				height 100%
				cursor pointer
			img
				height 100%
				width 100%
				display block
				opacity 0
			img:first-of-type
				height 100%
				width auto
		.slider.initialized
			canvas
				opacity 1
			span.loading
				opacity 0
		.slider.size-1
			height 60vh
			+below($tablet)
				height 40vh
			img:nth-child(n+3)
				margin-top -60vh
				+below($tablet)
					margin-top -40vh
		.slider.size-2
			height 80vh
			+below($tablet)
				height 60vh
			img:nth-child(n+3)
				margin-top -80vh
				+below($tablet)
					margin-top -60vh
		.slider.size-3
			height 100vh
			+below($tablet)
				height 80vh
			img:nth-child(n+3)
				margin-top -100vh
				+below($tablet)
					margin-top -80vh
		.slider.size-4
			height 120vh
			+below($tablet)
				height 100vh
			img:nth-child(n+3)
				margin-top -120vh
				+below($tablet)
					margin-top -100vh
		.slider.size-5
			height 160vh
			+below($tablet)
				height 110vh
			img:nth-child(n+3)
				margin-top -160vh
				+below($tablet)
					margin-top -110vh
		.slider.size-6
			height 180vh
			+below($tablet)
				height 110vh
			img:nth-child(n+3)
				margin-top -180vh
				+below($tablet)
					margin-top -110vh
		.slider.dragX canvas
			cursor url(../../images/dragX.svg) 16 16,url(../../images/dragX.png) 16 16, ew-resize
		.slider.dragY canvas
			cursor url(../../images/dragY.svg) 16 16,url(../../images/dragY.png) 16 16, ns-resize
		.slider.dragX.dragY canvas
			cursor url(../../images/dragXY.svg) 16 16,url(../../images/dragXY.png) 16 16, move
		.videoContainer
			width 100%
			height 100%
			position relative
			#videoPlayer
				display block
				float left
			.control
				flexbox()
				float left
				clear both
				width 100%
				height 100%
				z-index 5
				line-height 1
				flex-direction column
				justify-content space-between
				position absolute
				+below($tablet)
					position initial
					display block !important
					opacity 1 !important
					margin-top $padding
				.btnPlay
					float left
					width 34px
					height 30px
					padding 5px
					cursor pointer
				.icon-play
					background url('../../images/vp_sprite.png') no-repeat -11px 0
					width 6px
					height 9px
					display block
					margin 4px 0 0 8px
				.icon-pause
					background url('../../images/vp_sprite.png') no-repeat -34px -1px
					width 8px
					height 9px
					display block
					margin 4px 0 0 8px
				.selected
					font-size 15px
					color #ccc
				.next
					cursor pointer
					padding 7px
				.sound
					cursor pointer
					padding 7px
					+below($tablet)
						display none
				.sound strong::after
					content 'Mute'
				.sound.muted strong::after
					content 'Unmute'
				.icon-sound
					background url('../../images/vp_sprite.png') no-repeat -19px 0
					width 13px
					height 10px
					display block
					margin 8px 0 0 8px
				.muted .icon-sound
					width 7px !important
				.btnFS
					width 30px
					height 30px
					float left
				.icon-fullscreen
					background url('../../images/vp_sprite.png') no-repeat 0 0
					width 10px
					height 10px
					display block
					margin 8px 0 0 9px
			.btmControl
				clear both
			.progress-bar
				height 20px
				padding 10px 0px
				float left
				width 100%
				cursor pointer
				+below($tablet)
					display none
			.progress
				width 100%
				height 1px
				position relative
				cursor pointer
				background rgba(0,0,0,0.2) /* fallback */
			.progress span
				height 100%
				position absolute
				top 0
				left 0
				display block
				border-radius 10px
			.timeBar
				z-index 10
				width 0
				background $secondary
			.timeBar::after
				content ''
				height 16px
				width 1px
				background $secondary
				position absolute
				top -8px
				right 0
			.bufferBar
				z-index 5
				width 0
				background rgba(0,0,0,0.2)
			.volume
				position relative
				cursor pointer
				width 70px
				height 10px
				float right
				margin-top 10px
				margin-right 10px
			.volumeBar
				display block
				height 100%
				position absolute
				top 0
				left 0
				background-color #eee
				z-index 10
		span.switch
			hideselect()
			span(1)
			padding-top 76px
			padding-bottom $padding
			+above($laptop + 1)
				padding-top 83px
			+above($desktop)
				padding-top 90px
			+above($large)
				padding-top 105px
			h2
				+below($tablet)
					line-height 27px
			//position fixed
			//top calc(50% - 1em)
			//left $padding
			//width 'calc(100% - %s)' % ($padding * 2)
		span.menu
			span(1)
			margin-top 2px
			hideselect()
			h2
				+below($tablet)
					line-height 27px
			h2.feed
				cursor pointer
			h2.feed::after
				bottom 1px
			div.articles
				position relative
				display none
			div.articles.show
				display block
			div.article
				position relative
				fontoffset()
		#page_content
			display none
			background $primary
			overflow-y scroll
			overflow-x hidden
			height 100vh
			+above($tablet + 1)
				span(1/2)
				position fixed
				right 0
				top $padding
				border-left $padding solid $primary
				border-right $padding solid $primary
			.inner
				span(1)
				margin-top 2px
				margin-bottom $padding
				indented-paragraph(1em)
				.paragraphs
					flowing-paragraph(1em)
				h2 + h2::before, h2 + h3::before, h3 + h3::before
					display none
				h2 + p, .sticky-container + p, .paragraphs p:first-child
					fontoffset()
				.sticky-container
					z-index 1
					position relative
					background $primary
					padding-top 2px
					margin-top -2px
					h2::after
						bottom 0
					.fixed
						position fixed
						top $padding
						left 'calc(50% + %s)' % ($padding)
						width 'calc(50% - %s)' % ($padding*2)
						background $primary
						padding-top 2px
						z-index 0
						+below($tablet)
							left $padding
							width 'calc(100% - %s)' % ($padding*2)
				.article:not(:last-child)
					margin-bottom 1em
			.inner.article
				text-align justify
				text-justify inter-word
				h2:first-of-type::before, h3:first-of-type::before
					display none
				.sticky-container
					h2:first-of-type::before, h3:first-of-type::before
						display block

body.page
	span.back
		+below($tablet)
			position fixed
			width 'calc(100% - %s)' % ($padding*2)
			background $primary
			display block
		h2::before, h2::after
			+below($tablet)
				display block
				
	#wrap
		overflow-y scroll
		-webkit-overflow-scrolling touch
		span.menu, span.switch
			+below($tablet)
				display none
		#page_content
			display block
			+below($tablet)
				padding-bottom 'calc(2em + %s)' % ($padding)

body.project
	overflow hidden
	padding 0
	#wrap::before
		display none
	#wrap
		overflow hidden
	span.back
		display block
		bottom 'calc(%s - .18em)' % ($padding)

@-moz-document url-prefix() {
	body #wrap .slider.initialized span.loading {
		opacity: 1;
	}
    body #wrap .slider.image canvas {
        display: none;
    }
}